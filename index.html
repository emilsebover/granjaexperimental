<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión Avícola Pro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Registro Avícola</h1>
            <select id="selectorSemana" onchange="actualizarTablaVista()">
                <option value="0">Día 1</option>
                <option value="1">Semana 1</option>
                <option value="2">Semana 2</option>
                <option value="3">Semana 3</option>
                <option value="4">Semana 4</option>
                <option value="5">Semana 5</option>
                <option value="6">Semana 6</option>
            </select>
        </header>
        
        <section class="card">
            <div class="grid-inputs">
                <div class="field"><label>N° Granja:*</label><input type="number" id="granja" placeholder="Completar número" onchange="verificarCambioLote()"></div>
                <div class="field"><label>F. Nacimiento:*</label><input type="date" id="fechaNacimiento" onchange="verificarCambioLote()"></div>
                <div class="field"><label>F. Registro:</label><input type="date" id="fechaGeneral" onchange="actualizarEdad()"></div>
                <div class="field"><label>Edad (Días):</label><input type="text" id="edadAve" readonly value="0"></div>
            </div>
            <div class="field" style="margin-top:10px;"><label>Tara (kg):</label><input type="number" id="tara" step="0.001" value="0.000"></div>
        </section>

        <section class="card section-pesaje">
            <h3>1. Pesaje y Mortalidad</h3>
            <div class="grid-inputs">
                <div class="field"><label>N° Corral*</label><input type="number" id="pesajeCorral" oninput="autocompletarTratamiento(this, 'pesajeTrat')"></div>
                <div class="field"><label>Tratamiento*</label><input type="text" id="pesajeTrat" maxlength="1"></div>
                <div class="field"><label>Peso Total*</label><input type="number" id="pesoTotal" step="0.001"></div>
                <div class="field"><label>Cant. Aves*</label><input type="number" id="cantidadAves"></div>
                <div class="field"><label>Muertos (Cant)</label><input type="number" id="muertosCant" value="0"></div>
                <div class="field"><label>Peso Muertos</label><input type="number" id="muertosPeso" step="0.001" value="0"></div>
            </div>
            <button onclick="registrarPesaje()" class="btn-add">Registrar Pesaje</button>
        </section>

        <section class="card section-alimento">
            <h3>2. Control de Alimento</h3>
            <div class="grid-inputs">
                <div class="field"><label>N° Corral*</label><input type="number" id="alimCorral" oninput="autocompletarTratamiento(this, 'alimTrat')"></div>
                <div class="field"><label>Tratamiento</label><input type="text" id="alimTrat" readonly></div>
                <div class="field"><label>Agregado (kg)</label><input type="number" id="alimAgregado" step="0.1"></div>
                <div class="field"><label>Sobrante (kg)</label><input type="number" id="alimSobrante" step="0.1"></div>
            </div>
            <button onclick="registrarAlimento()" class="btn-add btn-alim">Registrar Alimento</button>
        </section>

        <section class="card">
            <h3>Registros Guardados (Semana <span id="semDisplay">0</span>)</h3>
            <div style="overflow-x:auto;">
                <table id="tablaRegistros">
                    <thead>
                        <tr>
                            <th>Corral</th>
                            <th>Tipo</th>
                            <th>Dato Principal</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="btn-group" style="margin-top: 20px;">
                <button onclick="guardarProgreso()" class="btn-save" style="background-color:#28a745;">Guardar Lote</button>
                <button onclick="exportarExcel()" class="btn-save" style="background-color:#6c757d;">Exportar CSV</button>
            </div>
        </section>
    </div>
    <script src="script.js"></script>
</body>
</html>